/* Reset and Base Styles */
:root {
    /* Brand Colors (Kept same) */
    --bmw-blue: #0066B1;
    --bmw-red: #E30613;
    --bmw-black: #000000;
    --bmw-white: #FFFFFF;

    /* Dark Mode Palette - Refined for Sophistication */
    --bg-primary: #0A0A0C; /* Even deeper base */
    --bg-secondary: #141418; /* Richer secondary */
    --bg-tertiary: #1F1F24; /* For hover states, inner elements */
    --bg-panel: var(--bg-secondary); /* Standard panel background */
    --bg-header: rgba(10, 10, 12, 0.85); /* Match primary bg closely, with blur */
    --text-primary: #F0F0F5; /* Slightly brighter primary text */
    --text-secondary: #A0A0A8; /* Muted secondary */
    --text-tertiary: #6B6B72; /* For less important text, placeholders */
    --text-headings-main: var(--bmw-white);
    --text-headings-section: var(--bmw-blue);
    --text-headings-sub: #E0E0E5; /* Brighter subheadings */
    --text-headings-minor: var(--bmw-red); /* Kept for specific emphasis */
    --accent-primary: var(--bmw-blue);
    --accent-secondary: var(--bmw-red);
    --border-color: rgba(255, 255, 255, 0.12); /* Slightly more visible border */
    --border-color-light: rgba(255, 255, 255, 0.07); /* Lighter for subtle dividers */
    --border-color-hover: rgba(0, 102, 177, 0.5); /* Blue tint on hover */
    --highlight-glow: 0 0 25px rgba(0, 102, 177, 0.4); /* Enhanced glow */
    --highlight-glow-red: 0 0 20px rgba(227, 6, 19, 0.35); /* Enhanced red glow */

    /* Flowchart Specific (Placeholders, will be refined with new design) */
    --flowchart-bg: var(--bg-secondary);
    --flowchart-step-bg: var(--bg-tertiary);
    --flowchart-manual-bg: #2a2a30;
    --flowchart-connector-color: #383840;
    --flowchart-decision-bg: rgba(227, 6, 19, 0.1); /* More subtle red bg */
    --flowchart-decision-border: var(--accent-secondary);
    --flowchart-stop-bg: var(--bmw-red);
    --flowchart-output-border: var(--accent-primary);
    --flowchart-icon-color: var(--text-secondary);

    /* Gradients */
    --gradient-primary: linear-gradient(135deg, var(--accent-primary) 0%, #004C8C 100%); /* Blue gradient */
    --gradient-accent: linear-gradient(135deg, var(--accent-secondary) 0%, #B30510 100%); /* Red gradient */
    /* Subtle layered background gradient */
    --gradient-background:
        linear-gradient(160deg, rgba(10, 10, 12, 0.1) 0%, rgba(20, 20, 24, 0.3) 100%),
        linear-gradient(45deg, rgba(20, 20, 24, 0.2) 0%, rgba(10, 10, 12, 0.1) 100%);

    /* Shadows - Slightly Softer */
    --shadow-sm: 0 2px 4px rgba(0, 0, 0, 0.25);
    --shadow-md: 0 4px 8px rgba(0, 0, 0, 0.3);
    --shadow-lg: 0 8px 16px rgba(0, 0, 0, 0.35);
    --shadow-xl: 0 16px 24px rgba(0, 0, 0, 0.35);
    --shadow-inset: inset 0 1px 3px rgba(0,0,0,0.4);

    /* Animation & Transitions */
    --transition-speed: 0.25s;
    --transition-medium: 0.4s;
    --transition-slow: 0.6s;
    --ease-out-cubic: cubic-bezier(0.215, 0.610, 0.355, 1.000);
    --ease-in-out-cubic: cubic-bezier(0.645, 0.045, 0.355, 1.000);

    /* Sizes & Layout */
    --header-height: 70px;
    --header-height-mobile: 60px;
    --max-content-width: 1100px;
    --content-padding: 0 2.5rem; /* Desktop content padding */
    --content-padding-mobile: 0 1.5rem; /* Mobile content padding */
    --section-padding-y: 6rem; /* Desktop vertical padding */
    --section-padding-y-mobile: 4.5rem; /* Mobile vertical padding */
    --panel-padding: calc(var(--element-spacing) * 1.8); /* Base padding for panels */
    --panel-padding-mobile: calc(var(--element-spacing) * 1.4);
    --mobile-breakpoint: 768px;
    --desktop-nav-breakpoint: 1050px; /* Breakpoint for adjusting desktop nav */
    --element-spacing: 1.5rem; /* Base unit for margins/padding */
    --border-radius-md: 12px; /* Medium border radius */
    --border-radius-lg: 16px; /* Large border radius */
}

* { margin: 0; padding: 0; box-sizing: border-box; }
html { scroll-behavior: smooth; }

body {
    font-family: 'Inter', sans-serif;
    font-weight: 400; /* Default weight */
    font-size: 16.5px;
    line-height: 1.7; /* Adjusted line height */
    background-color: var(--bg-primary);
    color: var(--text-primary);
    overflow-x: hidden;
    /* Apply subtle layered gradient background */
    background-image: var(--gradient-background);
    background-attachment: fixed; /* Keep gradient fixed during scroll */
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
}
body.mobile-menu-open { overflow: hidden; }


/* --- Header & Navigation --- */
.header {
    position: fixed; top: 0; left: 0; width: 100%; z-index: 1000;
    height: var(--header-height);
    transition: transform var(--transition-medium) var(--ease-out-cubic), background-color var(--transition-medium) var(--ease-out-cubic);
}
@media (min-width: calc(var(--mobile-breakpoint) + 1px)) {
    .header.scroll-down { transform: translateY(-100%); }
    .header.scroll-up { transform: translateY(0); }
}

.header-content {
    max-width: var(--max-content-width); margin: 0 auto; padding: var(--content-padding);
    height: 100%; display: flex; justify-content: space-between; align-items: center;
}
.logo {
    height: 45px;
    width: auto;
    flex-shrink: 0;
    transition: transform var(--transition-speed) var(--ease-out-cubic), filter var(--transition-speed);
    /* filter: brightness(0) invert(1); /* REMOVED - Logo should have contrast */
}
.logo:hover {
    transform: scale(1.05);
    /* filter: brightness(0) invert(1) drop-shadow(var(--highlight-glow)); /* REMOVED */
}


/* Desktop Navigation */
.nav.desktop-nav { position: relative; }
.nav.desktop-nav ul { display: flex; list-style: none; gap: calc(var(--element-spacing) * 1.6); }
.nav.desktop-nav ul li a { white-space: nowrap; text-decoration: none; color: var(--text-secondary); font-weight: 500; font-size: 1rem; transition: color var(--transition-speed), font-size var(--transition-speed); position: relative; padding: 0.5rem 0.2rem; }
.nav.desktop-nav ul li a::after { content: ''; position: absolute; bottom: 0; left: 0; right: 0; margin: auto; width: 0; height: 2px; background-color: var(--accent-primary); /* Use primary blue for underline */ transition: width var(--transition-speed) var(--ease-out-cubic), background-color var(--transition-speed); }
.nav.desktop-nav ul li a:hover { color: var(--text-primary); }
.nav.desktop-nav ul li a:hover::after { width: 100%; }
.nav.desktop-nav ul li a.active { color: var(--text-primary); }
/* Active link underline back to blue */
.nav.desktop-nav ul li a.active::after { width: 100%; background-color: var(--accent-primary); }

/* Progress bar back to blue */
.progress-bar {
    position: absolute; bottom: -1px; left: 0; height: 3px;
    background: var(--gradient-primary); /* Use BLUE gradient for progress */
    width: 0%;
    transition: width 0.1s linear; /* Keep fast */
    border-radius: 0 2px 2px 0;
}

/* Hamburger Button */
.hamburger-button { display: none; background: none; border: none; padding: 0; cursor: pointer; width: 30px; height: 24px; position: relative; z-index: 1100; }
.hamburger-button span { display: block; width: 100%; height: 3px; background-color: var(--text-primary); border-radius: 3px; position: absolute; left: 0; transition: transform 0.35s var(--ease-in-out-cubic), opacity 0.2s var(--ease-out-cubic), background-color 0.2s; } /* Smoother transition */
.hamburger-button span:nth-child(1) { top: 0; }
.hamburger-button span:nth-child(2) { top: 50%; transform: translateY(-50%); }
.hamburger-button span:nth-child(3) { bottom: 0; }
.hamburger-button:hover span { background-color: var(--accent-primary); }
.hamburger-button.active span { background-color: var(--accent-primary); } /* Keep blue when active */
.hamburger-button.active span:nth-child(1) { transform: translateY(10.5px) rotate(45deg); }
.hamburger-button.active span:nth-child(2) { opacity: 0; }
.hamburger-button.active span:nth-child(3) { transform: translateY(-10.5px) rotate(-45deg); }

/* Mobile Menu Overlay */
.mobile-menu {
    display: block; /* Keep it in the DOM, control visibility with opacity/visibility */
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100dvh; /* Use dynamic viewport height */
    background-color: rgba(10, 10, 12, 0.95);
    backdrop-filter: blur(18px); -webkit-backdrop-filter: blur(18px);
    z-index: 1050;
    opacity: 0;
    visibility: hidden; /* Hidden by default */
    transition: opacity 0.35s var(--ease-out-cubic), visibility 0s linear 0.35s;
    padding-top: calc(var(--header-height-mobile) + 3rem);
    overflow-y: auto;
}
.mobile-menu.open {
    opacity: 1;
    visibility: visible; /* Make visible when open */
    transition: opacity 0.35s var(--ease-out-cubic), visibility 0s linear 0s;
}
.mobile-menu nav { display: flex; flex-direction: column; justify-content: center; align-items: center; min-height: calc(100% - var(--header-height-mobile) - 6rem); }
.mobile-menu ul { list-style: none; padding: 0; margin: 0; text-align: center; }
.mobile-menu li { margin-bottom: 2.5rem; /* Increased spacing */ }
.mobile-menu a { color: var(--text-primary); text-decoration: none; font-size: 1.9rem; font-weight: 600; transition: color 0.2s; position: relative; }
.mobile-menu a:hover { color: var(--accent-primary); }
/* Add subtle underline effect on hover for mobile nav */
.mobile-menu a::after { content: ''; position: absolute; bottom: -5px; left: 10%; right: 10%; height: 2px; background: var(--accent-primary); transform: scaleX(0); transition: transform 0.3s var(--ease-out-cubic); transform-origin: center; }
.mobile-menu a:hover::after { transform: scaleX(1); }

/* Utility classes */
.mobile-only { display: none; } /* Will be shown via media query */
.desktop-only { display: block; } /* Will be hidden via media query */

/* --- Main Content & Sections --- */
.main-content { padding-top: var(--header-height); }
#top { height: 1px; /* Anchor point for logo link */}
.section { max-width: var(--max-content-width); margin: 0 auto; padding: var(--section-padding-y) var(--content-padding); position: relative; }

/* Section Divider */
.section-divider.visual-divider {
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--border-color-light), transparent);
    margin: calc(var(--section-padding-y) / 1.5) 0; /* Position between sections */
    border: none;
}
/* Remove divider after last section visually */
main > .section:last-of-type + .section-divider { display: none; }


/* --- Basic Animation Setup --- Refined */
.animate-on-scroll .animate-item {
    opacity: 0;
    transform: translateY(20px) scale(0.98); /* Slightly larger initial transform */
    transition: opacity var(--transition-medium) var(--ease-out-cubic) var(--animation-delay, 0s),
                transform var(--transition-medium) var(--ease-out-cubic) var(--animation-delay, 0s);
}
.section.visible .animate-item { opacity: 1; transform: translateY(0) scale(1); }

/* --- Typography & Basic Elements --- Refined */
h1 { font-size: clamp(2.2rem, 5vw, 3.5rem); margin-bottom: calc(var(--element-spacing) * 1.8); color: var(--text-headings-main); text-align: center; font-weight: 700; letter-spacing: -0.025em; line-height: 1.2; }
h2 { font-size: clamp(1.8rem, 4vw, 2.6rem); margin-bottom: calc(var(--element-spacing) * 1.8); color: var(--text-headings-section); border-bottom: 2px solid var(--border-color); padding-bottom: calc(var(--element-spacing) * 0.6); font-weight: 700; letter-spacing: -0.01em; }
h3 { font-size: clamp(1.5rem, 3.5vw, 1.9rem); margin-top: calc(var(--element-spacing) * 1.8); margin-bottom: var(--element-spacing); color: var(--text-headings-sub); font-weight: 600; /* Slightly heavier */ }
h3.section-identifier { /* Style like H2 */ font-size: clamp(1.8rem, 4vw, 2.6rem); margin-bottom: calc(var(--element-spacing) * 1.8); color: var(--text-headings-section); border-bottom: 2px solid var(--border-color); padding-bottom: calc(var(--element-spacing) * 0.6); margin-top: 0; font-weight: 700; letter-spacing: -0.01em; }
/* Pillar Group Title H4 */
.pillar-detail > h4 { font-size: 1.35rem; color: var(--text-headings-sub); font-weight: 600; margin-bottom: calc(var(--element-spacing) * 1.2); margin-top: 0; padding-bottom: calc(var(--element-spacing) * 0.4); border-bottom: 1px solid var(--border-color-light); }
/* Action Titles (using strong within li) */
li > strong { font-weight: 600; color: var(--text-headings-minor); /* Use red for 'Action:' keyword */ font-size: 1.05em; margin-right: 0.3em;}
h4 { /* Generic h4 if used elsewhere */ font-size: 1.15rem; color: var(--text-headings-sub); font-weight: 600; margin-bottom: calc(var(--element-spacing) * 0.6); margin-top: var(--element-spacing); }
h5 { font-size: 1.1rem; color: var(--text-secondary); margin-top: var(--element-spacing); margin-bottom: calc(var(--element-spacing) * 0.5); font-weight: 500; letter-spacing: 0.01em; }

p { margin-bottom: var(--element-spacing); color: var(--text-primary); }
p.subtle { color: var(--text-secondary); font-size: 0.95em; }

ul, ol, dl { margin-left: 0; padding-left: calc(var(--element-spacing) * 1.2); margin-bottom: var(--element-spacing); } /* Use padding for indent */
li { margin-bottom: calc(var(--element-spacing) * 0.6); padding-left: calc(var(--element-spacing) * 0.3); position: relative; }
ul ul, ol ol, ul dl, ol dl { margin-top: calc(var(--element-spacing)*0.6); margin-bottom: calc(var(--element-spacing)*0.6); padding-left: calc(var(--element-spacing) * 1.5); } /* Increased nested indent */
ul.nested-list, ol.nested-list { padding-left: calc(var(--element-spacing) * 1.5); } /* Consistent nested indent via padding */

/* Updated Styled List Items (Removed Checkmark) */
.styled-list { list-style: none; padding-left: 0; }
.styled-list > li { padding-left: calc(var(--element-spacing) * 1.5); /* Indentation */ position: relative; }
.styled-list > li::before {
    content: ''; /* Custom bullet */
    background-color: var(--accent-primary);
    width: 6px; height: 6px;
    border-radius: 2px; /* Slightly squared */
    display: inline-block;
    position: absolute;
    left: 0.2em; /* Position */
    top: 0.6em; /* Align vertically */
    transform: rotate(45deg); /* Diamond shape */
}
/* Deeper nested list indicator */
.styled-list ul.nested-list { list-style: none; padding-left: calc(var(--element-spacing) * 1.5); }
.styled-list ul.nested-list > li::before {
    content: '';
    background-color: var(--text-tertiary); /* More subtle color */
    width: 4px; height: 4px;
    border-radius: 50%; /* Circle */
    transform: none; /* No rotation */
    left: 0.3em;
    top: 0.7em;
}
/* Specific Channel List Style */
ul.channel-list { list-style: none; padding-left: var(--element-spacing); }
ul.channel-list > li { padding-left: calc(var(--element-spacing) * 1.2); }
ul.channel-list > li::before {
    content: '#';
    color: var(--text-tertiary); /* Subtle hash */
    font-weight: 500;
    position: absolute;
    left: 0;
    top: 0.1em; /* Adjust alignment */
    font-size: 1em;
    background: none; width: auto; height: auto; border-radius: 0; transform: none;
}

/* Roadmap list style (now using UL) */
ul.roadmap-details { list-style: none; padding-left: calc(var(--element-spacing) * 1.5); } /* Changed padding */
ul.roadmap-details li { margin-bottom: calc(var(--element-spacing)*0.7); font-size: 1rem; position: relative; color: var(--text-primary); padding-left: calc(var(--element-spacing) * 0.5); }
ul.roadmap-details li::before {
    content: '—'; /* Use em-dash or similar */
    color: var(--accent-primary);
    font-weight: 600;
    position: absolute;
    left: -0.2em;
    top: -0.05em; /* Adjust alignment */
    font-size: 1.1em;
    background: none; width: auto; height: auto; border-radius: 0; transform: none;
}

a { color: var(--accent-primary); text-decoration: underline; text-decoration-thickness: 1.5px; text-underline-offset: 5px; text-decoration-color: rgba(0, 102, 177, 0.4); transition: color var(--transition-speed), text-decoration-color var(--transition-speed); }
a:hover { color: var(--bmw-red); text-decoration-color: rgba(227, 6, 19, 0.6); } /* Red hover */
.nav a, .action-button a, h1 a, h2 a, h3 a, h4 a, h5 a { text-decoration: none; }

strong { font-weight: 600; color: var(--text-headings-sub); } /* Use 600 weight */
i, em { font-style: italic; color: var(--text-secondary); }
pre { background-color: var(--bg-tertiary); padding: var(--element-spacing); border-radius: var(--border-radius-md); overflow-x: auto; font-size: 0.9em; border: 1px solid var(--border-color); box-shadow: var(--shadow-inset); }

/* --- Unified Panel Component Style --- */
.panel {
    background: var(--bg-panel);
    padding: var(--panel-padding);
    border-radius: var(--border-radius-lg); /* Larger radius */
    margin-bottom: calc(var(--element-spacing) * 2);
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-md);
    transition: transform var(--transition-medium) var(--ease-out-cubic),
                box-shadow var(--transition-medium) var(--ease-out-cubic),
                border-color var(--transition-medium);
    /* Fix for mobile visibility bug - ensure base visibility */
    opacity: 1;
    visibility: visible;
}
.panel.interactive-element:hover { /* Hover applied to panel itself */
    transform: translateY(-6px) scale(1.01);
    box-shadow: var(--shadow-lg), var(--highlight-glow);
    border-color: var(--border-color-hover);
}

/* Ensure animated items inside panels are visible once section is visible */
/* This might need further refinement depending on exact cause of mobile bug */
.section.visible .panel .animate-item {
    opacity: 1; /* Ensure opacity is set when section is visible */
    transform: translateY(0) scale(1);
}


/* Meta Info Panel specific style */
.panel-meta {
    font-size: 0.9rem;
    color: var(--text-secondary);
    max-width: 850px; /* Slightly wider */
    margin-left: auto;
    margin-right: auto;
    text-align: center;
    background: linear-gradient(145deg, var(--bg-secondary), var(--bg-tertiary)); /* Subtle gradient */
    border-width: 1px;
    padding: calc(var(--panel-padding)*0.8); /* Slightly less padding */
}
.panel-meta p { margin-bottom: 0.6rem; }
.panel-meta p strong { color: var(--text-primary); font-weight: 500;} /* Less emphasis */


/* --- Glass Effect (Header, Buttons) --- */
.glass-nav, .action-button.glass-card { backdrop-filter: blur(18px); -webkit-backdrop-filter: blur(18px); border: 1px solid var(--border-color); }
.glass-nav { background: var(--bg-header); box-shadow: var(--shadow-sm); } /* Add subtle shadow to header */
.action-button.glass-card { background: rgba(20, 20, 24, 0.7); } /* Match secondary bg more */

/* --- Specific Section Styles --- */

/* Pillar List Style */
.pillar-list { list-style: none; padding-left: 0; margin-top: var(--element-spacing); columns: 2; gap: calc(var(--element-spacing) * 1.5); }
.pillar-list li { position: relative; padding: calc(var(--element-spacing)*0.6) 0 calc(var(--element-spacing)*0.6) calc(var(--element-spacing)*1.8); /* Adjusted padding */ margin-bottom: calc(var(--element-spacing)*0.5); font-size: 1.05rem; break-inside: avoid; border-radius: var(--border-radius-md); transition: background-color var(--transition-speed), transform var(--transition-speed); border: 1px solid transparent; }
.pillar-list li::before { content: ''; position: absolute; left: 0.5rem; top: 50%; transform: translateY(-50%); width: 8px; height: 8px; background-color: var(--accent-primary); border-radius: 3px; transition: transform 0.2s ease-out;}
.pillar-list li.interactive-element:hover { background-color: var(--bg-tertiary); transform: translateX(5px); border-color: var(--border-color-light); }
.pillar-list li.interactive-element:hover::before { transform: translateY(-50%) scale(1.3) rotate(45deg); }

/* Pillar Detail Grouping (Now using .panel) */
/* .panel containing .pillar-detail requires some internal spacing adjustments */
.panel .pillar-detail { margin-bottom: calc(var(--element-spacing) * 1.8); padding-bottom: calc(var(--element-spacing) * 1.8); }
.panel hr.visual-hr { border: none; height: 1px; background-color: var(--border-color-light); margin: calc(var(--element-spacing) * 2.5) 0; }
.panel .pillar-detail:last-of-type { margin-bottom: 0; padding-bottom: 0; }
.panel .pillar-detail:last-of-type hr.visual-hr { display: none; }

/* --- Flowchart Placeholder --- */
.placeholder-flowchart {
    border: 2px dashed var(--border-color-light);
    padding: var(--section-padding-y) var(--element-spacing);
    text-align: center;
    color: var(--text-tertiary);
    border-radius: var(--border-radius-lg);
    background: repeating-linear-gradient(
        -45deg,
        var(--bg-panel),
        var(--bg-panel) 10px,
        var(--bg-tertiary) 10px,
        var(--bg-tertiary) 20px
    );
     margin-top: var(--element-spacing);
}
.placeholder-flowchart > p { font-size: 1.1em; font-style: italic; margin: 0; }
.placeholder-flowchart .flowchart { display: none; } /* Hide the old flowchart content */

/* --- Technology Stack Table --- Refined */
.table-container { padding: 0; overflow-x: auto; /* Ensure horizontal scroll if needed */}
.tech-stack-table { width: 100%; border-collapse: collapse; margin-top: 0; }
.tech-stack-table th, .tech-stack-table td { padding: calc(var(--element-spacing)*0.9) calc(var(--element-spacing)*1.1); text-align: left; border-bottom: 1px solid var(--border-color-light); font-size: 0.95rem; }
.tech-stack-table th { color: var(--text-secondary); font-weight: 500; background-color: rgba(255,255,255,0.02); /* Subtle header bg */ text-transform: uppercase; font-size: 0.8rem; letter-spacing: 0.05em;}
.tech-stack-table tbody tr { transition: background-color var(--transition-speed); }
/* Removed row striping for cleaner look within panel */
.tech-stack-table tbody tr:hover { background-color: var(--bg-tertiary); }
.tech-stack-table tbody tr:last-child td { border-bottom: none; }
.tech-stack-table td:last-child, .tech-stack-table th:last-child { text-align: right; }
.tech-stack-table td a { text-decoration-style: dashed; font-weight: 500; }
.tech-stack-table .total-row td { font-weight: 600; border-top: 2px solid var(--border-color); /* Stronger separator */ padding-top: var(--element-spacing); margin-top: var(--element-spacing);}
.tech-stack-table .total-row td:first-child { font-size: 1rem; text-transform: uppercase; color: var(--text-secondary); }
.tech-stack-table .total-row strong { color: var(--accent-secondary); font-size: 1.15em; }

/* --- Timeline --- Enhanced */
.timeline { position: relative; max-width: 850px; /* Slightly wider */ margin: calc(var(--element-spacing)*1.5) auto 0 auto; padding-left: calc(var(--element-spacing)*2); }
.timeline::before { content: ''; position: absolute; left: 9px; /* Centered on dot */ top: 15px; bottom: 15px; width: 4px; background-color: var(--accent-primary); border-radius: 2px; opacity: 0.4; }
.timeline-item { position: relative; margin-bottom: calc(var(--element-spacing)*2.5); padding-left: calc(var(--element-spacing)*2.5); }
.timeline-dot { position: absolute; left: 0px; top: 8px; width: 20px; height: 20px; background-color: var(--bg-panel); border: 4px solid var(--accent-secondary); /* Red border */ border-radius: 50%; z-index: 1; transition: transform var(--transition-medium) var(--ease-out-cubic), box-shadow var(--transition-medium); }
.timeline-item.visible .timeline-dot { transform: scale(1.1); box-shadow: var(--highlight-glow-red);} /* Simple animation on view */
.timeline-content { padding: 0 0 0 calc(var(--element-spacing)*0.5); position: relative; }
.timeline-item h3 { margin-top: 0; margin-bottom: calc(var(--element-spacing)*0.8); color: var(--text-headings-sub); font-size: 1.6rem; font-weight: 600; }

/* --- Risk & Mitigation List --- */
.risk-list { list-style: none; padding-left: 0; margin-top: 0; }
/* Removed individual div wrappers for cleaner structure within panel */
.risk-list dt { font-weight: 600; color: var(--text-headings-minor); font-size: 1.1rem; margin-bottom: 0.4rem; margin-top: var(--element-spacing); }
.risk-list dd { margin-left: 0; font-size: 1rem; color: var(--text-primary); padding-bottom: var(--element-spacing); border-bottom: 1px solid var(--border-color-light); }
.risk-list dt:first-of-type { margin-top: 0; }
.risk-list dd:last-of-type { border-bottom: none; padding-bottom: 0; }
.risk-list dd strong { color: var(--text-secondary); font-weight: 500; }

/* --- Conclusion Panel --- */
.panel-conclusion {
    margin-top: calc(var(--element-spacing)*1.5);
    background: linear-gradient(135deg, rgba(0, 102, 177, 0.05), rgba(10, 10, 12, 0.2)); /* Subtle blue gradient */
    border-left: 5px solid var(--accent-primary); /* Blue emphasis border */
    box-shadow: var(--shadow-lg), inset 0 0 20px rgba(0, 102, 177, 0.1);
}
.panel-conclusion p { margin-bottom: var(--element-spacing); font-size: 1.05em; line-height: 1.75; }
.panel-conclusion p:last-child { margin-bottom: 0; }

/* --- Footer --- */
.footer { background-color: var(--bg-primary); /* Match base background */ color: var(--text-secondary); padding: calc(var(--element-spacing)*2.5); text-align: center; margin-top: calc(var(--element-spacing)*3); border-top: 1px solid var(--border-color-light); font-size: 0.9rem; }
.footer-content p { margin-bottom: 0.5rem; }
.footer-content p:last-child { margin-bottom: 0; }

/* --- Action Buttons --- */
.action-buttons { position: fixed; bottom: 1.5rem; right: 1.5rem; display: flex; flex-direction: column; gap: 1rem; z-index: 1010; }
.action-button { width: 58px; height: 58px; border-radius: 50%; border: none; cursor: pointer; display: flex; align-items: center; justify-content: center; position: relative; box-shadow: var(--shadow-lg); transition: transform var(--transition-speed) var(--ease-out-cubic), box-shadow var(--transition-speed) var(--ease-out-cubic), background-color var(--transition-speed) var(--ease-out-cubic); color: var(--text-primary); } /* inherits glass styles via class */
.action-button:hover { transform: translateY(-5px) scale(1.1); box-shadow: var(--shadow-xl), var(--highlight-glow); background-color: rgba(0, 102, 177, 0.8); /* Blue hover */ color: var(--bmw-white); }
.action-button:active { transform: translateY(-1px) scale(1.05); }
.action-button svg { width: 24px; height: 24px; transition: transform 0.2s; }
.action-button:hover svg { transform: scale(1.1); }
.action-button .button-text { /* Visually hidden */ position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden; clip: rect(0, 0, 0, 0); white-space: nowrap; border-width: 0; }
.action-button .tooltip-message { visibility: hidden; opacity: 0; width: max-content; max-width: 150px; background-color: var(--bmw-black); color: var(--bmw-white); text-align: center; border-radius: 6px; padding: 8px 14px; position: absolute; z-index: 1; bottom: 120%; left: 50%; transform: translateX(-50%) scale(0.95); transform-origin: bottom center; transition: opacity 0.3s var(--ease-out-cubic), visibility 0s linear 0.3s, transform 0.3s var(--ease-out-cubic); font-size: 0.85rem; line-height: 1.4; pointer-events: none; }
.action-button .tooltip-message.visible { visibility: visible; opacity: 1; transform: translateX(-50%) scale(1); transition-delay: 0s; }
.action-button.success { background-color: #28a745; border-color: #28a745; }
.action-button.error { background-color: #dc3545; border-color: #dc3545; }
.action-button.success:hover, .action-button.error:hover { transform: translateY(-2px) scale(1.03); background-color: #28a745; } /* Maintain color on hover */
.action-button.error:hover { background-color: #dc3545; }

/* Fine-tuning Interactive Element Hovers (applied mostly to list items now) */
.interactive-element { transition: transform var(--transition-speed) var(--ease-out-cubic), box-shadow var(--transition-speed) var(--ease-out-cubic), background-color var(--transition-speed) var(--ease-out-cubic); }
/* Apply specific hover to list items within styled lists */
.styled-list > li.interactive-element:hover {
    background-color: var(--bg-tertiary);
    transform: translateX(4px);
    border-radius: 6px; /* Ensure radius is visible */
}
/* Apply specific hover to risk list definition groups (now dt/dd) */
.risk-list > dt.interactive-element,
.risk-list > dd.interactive-element {
    padding: calc(var(--element-spacing) * 0.5) var(--element-spacing); /* Add padding for hover */
    margin: 0 calc(var(--element-spacing) * -1); /* Extend hover background to panel edges */
    border-radius: var(--border-radius-md);
}
.risk-list > dt.interactive-element:hover,
.risk-list > dd.interactive-element:hover {
    background-color: var(--bg-tertiary);
    transform: scale(1.01);
    box-shadow: var(--shadow-sm);
}
/* Ensure dt/dd hover together visually if possible (tricky without wrapper) */
.risk-list > dt.interactive-element:hover + dd.interactive-element {
     background-color: var(--bg-tertiary);
     transform: scale(1.01);
     box-shadow: var(--shadow-sm);
     border-top: 1px solid var(--border-color-light); /* Add separator on hover */
     margin-top: -1px; /* Prevent double borders */
}


/* --- Responsive Design --- */

/* Medium Desktops / Large Tablets */
@media (max-width: 1050px) and (min-width: 769px) {
    :root {
        --element-spacing: 1.4rem;
    }
     .nav.desktop-nav ul {
        gap: calc(var(--element-spacing) * 1.2); /* Reduce gap */
    }
    .nav.desktop-nav ul li a {
        font-size: 0.9rem; /* Reduce font size */
    }
}


@media (max-width: 992px) { /* Smaller Tablets */
    :root { --content-padding: 0 2rem; --section-padding-y: 5rem; --element-spacing: 1.4rem; --panel-padding: calc(var(--element-spacing) * 1.6);}
    h1 { font-size: clamp(2.1rem, 6vw, 3rem); } h2, h3.section-identifier { font-size: clamp(1.7rem, 5vw, 2.3rem); } h3 { font-size: clamp(1.4rem, 4vw, 1.7rem); }
    /* Desktop nav adjustments already handled by 1050px breakpoint */
    .pillar-list { columns: 1; }
    .panel { padding: var(--panel-padding); }
    .flowchart { min-width: 450px; } /* Placeholder adjustment */
}

@media (max-width: 768px) { /* Mobile */
    :root { --content-padding: var(--content-padding-mobile); --section-padding-y: var(--section-padding-y-mobile); --element-spacing: 1.2rem; font-size: 16px; --panel-padding: var(--panel-padding-mobile); --header-height: var(--header-height-mobile); }
    .desktop-nav { display: none; }
    .desktop-only { display: none; } /* Hide desktop only */
    .mobile-only { display: block; } /* Show mobile only */
    .header { height: var(--header-height); }
    .main-content { padding-top: var(--header-height); }
    .header-content { padding: var(--content-padding); } /* Ensure mobile padding used */
    .logo { height: 38px; }

    h1 { font-size: clamp(1.9rem, 7vw, 2.4rem); } h2, h3.section-identifier { font-size: clamp(1.6rem, 6vw, 2rem); } h3 { font-size: clamp(1.3rem, 5vw, 1.6rem); }
    .pillar-list { columns: 1; } /* Already handled above, but good to ensure */
    .pillar-list li { font-size: 1rem; padding-left: calc(var(--element-spacing)*1.5); }
    .pillar-list li::before { left: 0.3rem; }

    .timeline { padding-left: 1rem; margin-top: calc(var(--element-spacing)*1.5); }
    .timeline-item { padding-left: calc(var(--element-spacing)*2); margin-bottom: calc(var(--element-spacing)*2); }
    .timeline-dot { left: -8px; width: 16px; height: 16px; border-width: 3px; top: 6px; }
    .timeline-content { padding-left: calc(var(--element-spacing)*0.4); }
    .timeline-item h3 { font-size: 1.4rem; }
    ul.roadmap-details { padding-left: var(--element-spacing); }
    ul.roadmap-details li { font-size: 0.95rem; }

    .panel { padding: var(--panel-padding); border-radius: var(--border-radius-md); } /* Slightly smaller radius on mobile */
    .risk-list dt { font-size: 1.05rem; }
    .risk-list dd { font-size: 0.95rem; }

    /* Mobile Bug Fix: Ensure panel content is visible */
    #pillar-details .panel .animate-item {
        opacity: 1 !important; /* Force opacity if animation interaction fails */
        transform: none !important; /* Reset any transforms hiding it */
        /* Add other potential overrides if needed, e.g. visibility: visible !important; */
    }


    /* Responsive Table Styles */
    .tech-stack-table thead { display: none; }
    .tech-stack-table tr { display: block; margin-bottom: calc(var(--element-spacing)*1.2); border: none; border-bottom: 1px solid var(--border-color-light); padding-bottom: calc(var(--element-spacing)*1.2); }
    .tech-stack-table tr:last-child { border-bottom: none; margin-bottom: 0; padding-bottom: 0; }
    .tech-stack-table td { display: flex; justify-content: space-between; align-items: center; text-align: right; padding: calc(var(--element-spacing)*0.5) 0; border-bottom: none; font-size: 0.9rem; }
    .tech-stack-table td::before { content: attr(data-label); font-weight: 500; color: var(--text-secondary); text-align: left; padding-right: 1em; }
    .tech-stack-table .total-row { border-top: 2px solid var(--border-color); margin-top: var(--element-spacing); padding-top: var(--element-spacing); padding-bottom: 0; border-bottom: none; }
    .tech-stack-table .total-row td { display: block; text-align: left; padding: 0.2rem 0; }
    .tech-stack-table .total-row td::before { display: inline; font-weight: 600; color: var(--text-primary); }
    .tech-stack-table .total-row td:last-child { text-align: right; font-weight: bold; margin-top: 0.5rem; }
    .tech-stack-table .total-row strong { font-size: 1.1em; }


    /* Placeholder Flowchart Mobile */
    .placeholder-flowchart { padding: var(--section-padding-y-mobile) var(--element-spacing); }

    .action-buttons { bottom: 1rem; right: 1rem; gap: 0.8rem;}
    .action-button { width: 50px; height: 50px; }
    .action-button svg { width: 20px; height: 20px; }
}

/* Print Styles - Updated Base */
@media print {
     body { background: var(--bmw-white) !important; color: var(--bmw-black) !important; font-size: 10pt; line-height: 1.4; font-family: 'Times New Roman', Times, serif; }
     * { background: transparent !important; color: var(--bmw-black) !important; box-shadow: none !important; text-shadow: none !important; filter: none !important; backdrop-filter: none !important; -webkit-backdrop-filter: none !important; border-color: #aaa !important; transition: none !important; }
     .header, .nav .progress-bar, .action-buttons, .hamburger-button, .mobile-menu, .visual-divider, .logo { display: none !important; } /* Hide logo too */
     .main-content { margin: 0; padding: 1cm; padding-top: 0; }
     .section { padding: 0.6cm 0; max-width: 100%; opacity: 1 !important; transform: none !important; page-break-inside: avoid; }
     .panel, .panel-meta, .panel-conclusion { border: 1px solid #ccc; padding: 0.5cm; margin-bottom: 0.5cm; border-radius: 0; background: #f9f9f9 !important; page-break-inside: avoid; border-left-width: 1px; /* Reset emphasis border */}
     h1, h2, h3, h4, h5, h6 { color: var(--bmw-black) !important; page-break-after: avoid; margin-top: 0.8rem; margin-bottom: 0.4rem; font-family: 'Times New Roman', Times, serif; font-weight: bold;}
     h1 { font-size: 18pt; text-align: left; } h2, h3.section-identifier { font-size: 14pt; border-bottom: 1px solid #333; padding-bottom: 0.1rem; } h3 { font-size: 12pt; } h4 { font-size: 11pt; } h5 { font-size: 10pt; font-style: italic; }
     a { text-decoration: none; color: #003366 !important; }
     a[href^="http"]:after { content: " [" attr(href) "]"; font-size: 8pt; color: #555; word-break: break-all; }
     a[href^="#"]::after { content: ""; display: none; }
     ul, ol, dl { margin-bottom: 0.5rem; padding-left: 1.5rem; list-style-position: outside; }
     li, dd { margin-bottom: 0.3rem; }
     li::before { display: none; } /* Hide custom bullets */
     .styled-list { list-style: disc; } /* Use standard bullets for print */
     .styled-list ul.nested-list { list-style: circle; }
     ul.channel-list { list-style: none; }
     ul.channel-list li::before { content: "# "; display: inline; color: #555 !important; position: static; font-weight: normal; }
     .pillar-list { columns: 1; list-style: disc; padding-left: 2rem; }
     .timeline { padding-left: 0; } .timeline::before, .timeline-dot { display: none; } .timeline-item { padding-left: 0; margin-bottom: 0.5rem; }
     ul.roadmap-details { list-style: disc; } /* Bullets for roadmap print */
     /* Placeholder Flowchart Print */
     .placeholder-flowchart { border: 1px dashed #aaa; padding: 0.5cm; background: #f0f0f0 !important; text-align: center; color: #555 !important; }
     .placeholder-flowchart p { margin: 0; font-style: italic; }
     .risk-list dt { font-weight: bold; margin-top: 0.5rem;} .risk-list dd { margin-left: 1rem; padding-bottom: 0.3rem; border-bottom: 1px dotted #ccc; }
     .risk-list dd:last-of-type { border-bottom: none; }
     /* Responsive Table for Print */
     .table-container { overflow: visible; }
     .tech-stack-table, .tech-stack-table tbody, .tech-stack-table tr, .tech-stack-table td { display: block; width: 100%; }
     .tech-stack-table thead { display: none; }
     .tech-stack-table tr { page-break-inside: avoid; margin-bottom: 0.3cm; border: none; border-bottom: 1px dotted #ccc; padding: 0.1cm 0; }
     .tech-stack-table td { display: block; text-align: left !important; padding: 0.05cm 0 !important; border: none; background: transparent !important;}
     .tech-stack-table td::before { content: attr(data-label) ": "; display: inline; font-weight: bold; margin-right: 0.5rem; text-align: left !important; width: auto !important; position: static !important; color: #333 !important; }
     .tech-stack-table .total-row { border-top: 1px solid #333; margin-top: 0.3cm; padding-top: 0.2cm; background: none !important;}
     .tech-stack-table .total-row td::before { display: inline; }
     .tech-stack-table .total-row td:last-child { text-align: left !important; }

     .section h2, .section h3.section-identifier { page-break-before: always; padding-top: 1cm; }
     @page { margin: 2cm; }
}

/* Added will-change properties back for potential performance gains - monitor impact */
.animate-item { will-change: opacity, transform; }
.action-button, .panel.interactive-element, .pillar-list li.interactive-element { will-change: transform, box-shadow; }
.header { will-change: transform, background-color; }
.progress-bar { will-change: width; }
.timeline-dot { will-change: transform, box-shadow; }
.logo { will-change: transform, filter; } /* Keep filter in will-change even if not actively used now */
